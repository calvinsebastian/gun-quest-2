export const easyMessageList = [
  {},
  {
    text: "Point the mouse cursor in the direction you want to shoot",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Try holding down the left mouse button to keep firing",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Move your character using the w, a, s and d keys",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "If an enemy runs into you, you will lose some of your health",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Once your health hits 0, it's game over",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Press the e key to visit the shop",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Press the f key to enter fullscreen and m key to mute the audio",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Try moving in the direction opposite to where you're shooting",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Try holding shift while pushing w, a, s or d to move faster",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "If your stamina reaches 0, you wont be able to run again until it recovers",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "After killing an enemy they may drop an item. Each item does different things.",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Picking up cherries recovers your health, while corn recovers your stamina.",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Picking up ammo adds more bullets to a random weapon needing ammo",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Picking up a points coin gives you a random amount of points",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "If you pick up an item that you don't need, you will receive points instead",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Upgrade your weapons in the store. It makes a difference!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Shooting an enemy causes knockback, this can save your life in a pinch",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Every weapon has different stats. Try experimenting to see what works for you",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Try running diagonally to get out of a bad situation quickly",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {},
  {
    text: "I add new game mechanics frequently so dont forget to check back often!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Buying fewer weapons is a good strategy for ease of switching between them",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Practice makes perfect so try and try again",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Each enemy has a different speed and causes a different amount of damage",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Theres no shame in entering the store to pause and take a break",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Try luring enemies away from item drops so you can run around to pick them up",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Spend your points wisely if you're trying to get that highscore!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Items spawn around the map so keep your eyes peeled",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Did I mention you dont keep your high score in practice mode?",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "That's all the tips I have for now, if you think of anything else please let me know!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
];

export const messageList = [
  {},
  {
    text: "If you're struggling, try turning on practice mode in settings!",
    font: "12px 'Press Start 2P'",
    color: "green",
  },
  {
    text: "Controls are listed above!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Try holding to shoot!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Press e to view the shop!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Out of ammo? Buy a new gun!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Press shift to run!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Running uses stamina!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Eating corn recovers your stamina!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Eating cherries recovers your health!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Did you know random items spawn around the map?",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "If you want a highscore don't spend all your points!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Did you know the shop also pauses the game?",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "You will only pick up ammo for guns that need it!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Try Upgrading that weapon's damage!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "Shooting an enemy causes knockback!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {
    text: "It looks like you're getting it. Good luck!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {},
  {},
  {
    text: "Don't get caught trapped in a corner!",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {},
  {},
  {
    text: "Are you seeing a pattern here?",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {},
  {},
  {
    text: "My friend wrote this track, pretty sick right!?",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {},
  {},
  {
    text: "What are you saving for? A highscore lol?",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {},
  {},
  {
    text: "You're pretty good eh?",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {},
  {},
  {
    text: "This is what you came here for, right?",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
  {},
  {},
  {
    text: "Have you gotten any achievements?",
    font: "12px 'Press Start 2P'",
    color: "white",
  },
];

export default class Message {
  constructor(
    x,
    y,
    textWidth,
    text,
    color = "white",
    font = "16px Arial",
    duration = 2200
  ) {
    this.x = x; // Starting x position
    this.y = y; // Starting y position
    this.textWidth = textWidth; // Width of message
    this.text = text; // Message text
    this.duration = duration; // Duration to display the message
    this.font = font; // Font of the message
    this.color = color; // Color of the message
    this.startTime = Date.now(); // Time when the message started
    this.alpha = 1; // Initial alpha (opacity)
    this.velocityY = -0.7; // Vertical velocity for moving upwards
  }

  update(player) {
    const elapsed = Date.now() - this.startTime;
    const progress = elapsed / this.duration;

    // Determine alpha based on progress
    if (progress < 0.85) {
      this.alpha = 1; // Full opacity for the first 85% of the duration
    } else {
      // Rapid fade-out in the last 15%
      const fadeProgress = (progress - 0.85) / 0.15; // Normalize to [0, 1] range for the last 15%
      this.alpha = Math.max(0, 1 - fadeProgress * fadeProgress); // Quick fade-out
    }

    // Update x and y positions
    this.x = player.x + player.width / 2;
    const driftDistance = this.velocityY * ((elapsed / this.duration) * 100); // Drift distance in pixels
    this.y = player.y - 22 + driftDistance;
  }

  draw(ctx, map) {
    ctx.save();
    ctx.font = `bold ${this.font}`;
    ctx.fillStyle = this.color;
    ctx.globalAlpha = this.alpha;
    ctx.fillText(
      this.text,
      this.x - this.textWidth / 2 - map.xOffset,
      this.y - map.yOffset
    );
    ctx.restore();
  }

  isExpired() {
    // Check if the message has faded out
    return this.alpha <= 0;
  }
}
